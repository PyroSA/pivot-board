webpackJsonp([1],{121:function(t,e,s){"use strict";var r=s(2),o=s(144),n=s(139),i=s.n(n);r.a.use(o.a),e.a=new o.a({routes:[{path:"/",name:"Main",component:i.a}]})},122:function(t,e,s){function r(t){s(132)}var o=s(1)(s(126),s(141),r,null,null);t.exports=o.exports},123:function(t,e,s){"use strict";function r(t){this._configKey=t}var o=s(129),n=s.n(o);r.prototype.load=function(){return JSON.parse(localStorage.getItem(this._configKey)||'{ "pivotToken": "" }')},r.prototype.save=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem(this._configKey,n()(t))},e.a=r},124:function(t,e,s){"use strict";var r=s(138),o=s.n(r),n=s(3),i=s.n(n),a=void 0;a=function(t){this.apiToken=t,this.baseUrl="https://www.pivotaltracker.com/services/v5/"},a.prototype.updateStory=function(t,e,s,r){this.api("put","projects/"+t+"/stories/"+e,{json:s},r)},a.prototype.getStory=function(t,e){this.api("get","/stories/"+t,{},e)},a.prototype.getProjects=function(t){this.api("get","/projects",{},t)},a.prototype.getStories=function(t,e,s,r,o,n){this.paginated("projects/"+t+"/stories",o||0,n||128,e,s,r)},a.prototype.getActivity=function(t,e,s,r,o,n){this.paginated("projects/"+t+"/activity",o||0,n||128,e,s,r)},a.prototype.getStoryActivity=function(t,e,s,r){this.api("get","projects/"+t+"/stories/"+e+"/activity",{qs:r||{}},s)},a.prototype.getMyActivity=function(t,e){this.api("get","my/activity",{qs:e||{}},t)},a.prototype.getTasks=function(t,e,s){this.api("get","projects/"+t+"/stories/"+e+"/tasks",{},s)},a.prototype.addTask=function(t,e,s,r,o){this.api("post","projects/"+t+"/stories/"+e+"/tasks",{body:{description:s,position:r}},o)},a.prototype.getIterations=function(t,e,s,r,o,n){this.paginated("projects/"+t+"/iterations",o||0,n||128,e,s,r)},a.prototype.getCurrentIterations=function(t,e){this.api("get","projects/"+t+"/iterations",{qs:{scope:"current",date_format:"millis"}},function(t,s){i.a.isFunction(e)&&(t||!s?e(t):e(!1,s))})},a.prototype.getMemberships=function(t,e){this.api("get","projects/"+t+"/memberships",{},e)},a.prototype.getComments=function(t,e,s){this.api("get","projects/"+t+"/stories/"+e+"/comments",{},s)},a.prototype.exportStories=function(t,e){this.api("post","stories/export",{body:o.a.stringify({"ids[]":t})},e)},a.prototype.getLabels=function(t,e){this.api("get","projects/"+t+"/labels",{},e)},a.prototype.getStoryLabels=function(t,e,s){this.api("get","projects/"+t+"/stories/"+e+"/labels",{},s)},a.prototype.addStoryLabel=function(t,e,s,r){this.api("post","projects/"+t+"/stories/"+e+"/labels",{body:{name:s}},r)},a.prototype.createLabel=function(t,e,s){this.api("post","projects/"+t+"/labels",{body:{name:e}},s)},a.prototype.createStory=function(t,e,s){this.api("post","projects/"+t+"/stories",{body:e},s)},a.prototype.paginated=function(t,e,s,r,o,n){var a=this,c={qs:i.a.extend({offset:e,limit:s,envelope:!0},r)};this.api("get",t,c,function(i,c){i||!c.pagination?n&&n(i||c):(e+=c.pagination.returned,o&&o(c.data,c.pagination,function(i){if(i)n&&n(i);else{var u=c.pagination.total-e;u>0?a.paginated(t,e,Math.min(u,s),r,o,n):n&&n()}}))})},a.prototype.api=function(t,e,s,r){var n=new window.XMLHttpRequest;s.qs?n.open(t,""+this.baseUrl+e+"?"+o.a.stringify(s.qs)):n.open(t,""+this.baseUrl+e),n.responseType="json",n.setRequestHeader("X-TrackerToken",this.apiToken),n.onload=function(){i.a.isFunction(r)&&r(void 0,n.response)},n.onerror=function(t){console.error("Houston, we've got a problem.",t,n),i.a.isFunction(r)&&r(t)},n.send()},e.a=a},125:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(2),o=s(122),n=s.n(o),i=s(121);r.a.config.productionTip=!1,new r.a({el:"#app",router:i.a,template:"<App/>",components:{App:n.a}})},126:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},127:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(124),o=s(123),n=s(0),i=s.n(n),a=s(3),c=s.n(a),u=s(140),l=s.n(u),d=new o.a("pivot-board"),p=function(t,e){var s={labels:[],created:[],updated:[],accepted:[],todo:[],burn:[]},r=void 0;for(r=e.start;r<=e.finish;r+=864e5)s.labels.push(i()(r).format("D MMM")),s.created.push(e.stories.reduce(function(t,e){return e.created_at<=r?t+(e.estimate||0):t},0)),s.updated.push(e.stories.reduce(function(t,e){return e.updated_at<=r?t+(e.estimate||0):t},0)),s.accepted.push(e.stories.reduce(function(t,e){return e.accepted_at<=r?t+(e.estimate||0):t},0)),s.todo.push(s.created[s.created.length-1]-s.accepted[s.accepted.length-1]);var o=-1;for(r=e.finish;r>=e.start;r-=864e5){var n=i()(r).weekday();n>0&&n<6&&o++,s.burn.unshift(o<0?0:o)}var a=1/s.burn[0];for(r=0;r<s.burn.length;r++)s.burn[r]=s.created[r]*s.burn[r]*a;var c={labels:s.labels,series:[s.created,s.burn,s.todo]};t.update(c)};e.default={name:"main",components:{"story-card":l.a},data:function(){return{config:d.load(),connected:!1,pivotal:void 0,error:"",iterationCount:1,mainChart:void 0,projects:void 0,stories:void 0,selectedProject:void 0}},watch:{iterationCount:function(){this.selectProject(this.selectedProject)}},computed:{monitoring:function(){return this.config.connect},todoStories:function(){return(this.stories||[]).filter(function(t){return["planned","rejected"].includes(t.current_state)})},devStories:function(){return(this.stories||[]).filter(function(t){return["started","finished"].includes(t.current_state)})},qaStories:function(){return(this.stories||[]).filter(function(t){return["delivered"].includes(t.current_state)})},doneStories:function(){return(this.stories||[]).filter(function(t){return["accepted"].includes(t.current_state)})}},methods:{setToken:function(){d.save(this.config),this.connect()},disconnect:function(){this.connected=!1,this.projects=void 0,this.stories=void 0,this.selectProject(void 0)},selectIteration:function(t){t?(console.log("Iteration",t),this.stories=t.stories,p(this.mainChart,t)):this.stories=void 0},selectProject:function(t){var e=this;this.selectedProject=t,this.selectIteration(void 0),t&&(console.log("Project",t),this.pivotal.getIterations(t.id,{scope:"done_current",date_format:"millis",offset:1-this.iterationCount},function(t){if(c.a.isError(t))return void console.error("selectedProject",t);var s={start:t[0].start,finish:t[0].finish,stories:[]};t.forEach(function(t){s.start=Math.min(s.start,t.start),s.finish=Math.max(s.finish,t.finish),s.stories=s.stories.concat(t.stories)}),e.selectIteration(s)}))},connect:function(){var t=this;if(!this.config.pivotToken)return void this.disconnect();this.error={},this.connected=!0,this.pivotal=new r.a(this.config.pivotToken),this.pivotal.getProjects(function(e,s){if(e||s.error)return t.error=e||s,console.error(t.error),void t.disconnect();s&&s.length>0&&(console.log(s),t.projects=s,t.selectProject(s[0]))})}},updated:function(){var t=document.querySelector(".ct-chart");t&&t.__chartist__&&t.__chartist__.update()},mounted:function(){console.log("mounted"),this.connect(),this.mainChart=new window.Chartist.Line(".ct-chart",{labels:["new"],series:[[0,30,60,90,0,100]]},{axisY:{onlyInteger:!0}})}}},128:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"story-card",props:["story"],data:function(){return{}},methods:{cardStyle:function(t){switch(t.current_state){case"planned":return"card-outline-primary";case"rejected":return"card-outline-danger";case"started":return"card-outline-primary";case"finished":return"card-outline-warning";case"delivered":return"card-outline-primary";case"accepted":return"card-outline-success";default:return"card-outline-secondary"}},cardGlyph:function(t){switch(t.story_type){case"bug":return"fa fa-bug";case"chore":return"fa fa-cog";case"feature":return"fa fa-star";case"release":return"fa fa-flag-checkered";default:return"fa fa-question"}}},mounted:function(){}}},132:function(t,e){},133:function(t,e){},134:function(t,e){},135:function(t,e,s){function r(t){return s(o(t))}function o(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var n={"./af":4,"./af.js":4,"./ar":11,"./ar-dz":5,"./ar-dz.js":5,"./ar-kw":6,"./ar-kw.js":6,"./ar-ly":7,"./ar-ly.js":7,"./ar-ma":8,"./ar-ma.js":8,"./ar-sa":9,"./ar-sa.js":9,"./ar-tn":10,"./ar-tn.js":10,"./ar.js":11,"./az":12,"./az.js":12,"./be":13,"./be.js":13,"./bg":14,"./bg.js":14,"./bn":15,"./bn.js":15,"./bo":16,"./bo.js":16,"./br":17,"./br.js":17,"./bs":18,"./bs.js":18,"./ca":19,"./ca.js":19,"./cs":20,"./cs.js":20,"./cv":21,"./cv.js":21,"./cy":22,"./cy.js":22,"./da":23,"./da.js":23,"./de":26,"./de-at":24,"./de-at.js":24,"./de-ch":25,"./de-ch.js":25,"./de.js":26,"./dv":27,"./dv.js":27,"./el":28,"./el.js":28,"./en-au":29,"./en-au.js":29,"./en-ca":30,"./en-ca.js":30,"./en-gb":31,"./en-gb.js":31,"./en-ie":32,"./en-ie.js":32,"./en-nz":33,"./en-nz.js":33,"./eo":34,"./eo.js":34,"./es":36,"./es-do":35,"./es-do.js":35,"./es.js":36,"./et":37,"./et.js":37,"./eu":38,"./eu.js":38,"./fa":39,"./fa.js":39,"./fi":40,"./fi.js":40,"./fo":41,"./fo.js":41,"./fr":44,"./fr-ca":42,"./fr-ca.js":42,"./fr-ch":43,"./fr-ch.js":43,"./fr.js":44,"./fy":45,"./fy.js":45,"./gd":46,"./gd.js":46,"./gl":47,"./gl.js":47,"./gom-latn":48,"./gom-latn.js":48,"./he":49,"./he.js":49,"./hi":50,"./hi.js":50,"./hr":51,"./hr.js":51,"./hu":52,"./hu.js":52,"./hy-am":53,"./hy-am.js":53,"./id":54,"./id.js":54,"./is":55,"./is.js":55,"./it":56,"./it.js":56,"./ja":57,"./ja.js":57,"./jv":58,"./jv.js":58,"./ka":59,"./ka.js":59,"./kk":60,"./kk.js":60,"./km":61,"./km.js":61,"./kn":62,"./kn.js":62,"./ko":63,"./ko.js":63,"./ky":64,"./ky.js":64,"./lb":65,"./lb.js":65,"./lo":66,"./lo.js":66,"./lt":67,"./lt.js":67,"./lv":68,"./lv.js":68,"./me":69,"./me.js":69,"./mi":70,"./mi.js":70,"./mk":71,"./mk.js":71,"./ml":72,"./ml.js":72,"./mr":73,"./mr.js":73,"./ms":75,"./ms-my":74,"./ms-my.js":74,"./ms.js":75,"./my":76,"./my.js":76,"./nb":77,"./nb.js":77,"./ne":78,"./ne.js":78,"./nl":80,"./nl-be":79,"./nl-be.js":79,"./nl.js":80,"./nn":81,"./nn.js":81,"./pa-in":82,"./pa-in.js":82,"./pl":83,"./pl.js":83,"./pt":85,"./pt-br":84,"./pt-br.js":84,"./pt.js":85,"./ro":86,"./ro.js":86,"./ru":87,"./ru.js":87,"./sd":88,"./sd.js":88,"./se":89,"./se.js":89,"./si":90,"./si.js":90,"./sk":91,"./sk.js":91,"./sl":92,"./sl.js":92,"./sq":93,"./sq.js":93,"./sr":95,"./sr-cyrl":94,"./sr-cyrl.js":94,"./sr.js":95,"./ss":96,"./ss.js":96,"./sv":97,"./sv.js":97,"./sw":98,"./sw.js":98,"./ta":99,"./ta.js":99,"./te":100,"./te.js":100,"./tet":101,"./tet.js":101,"./th":102,"./th.js":102,"./tl-ph":103,"./tl-ph.js":103,"./tlh":104,"./tlh.js":104,"./tr":105,"./tr.js":105,"./tzl":106,"./tzl.js":106,"./tzm":108,"./tzm-latn":107,"./tzm-latn.js":107,"./tzm.js":108,"./uk":109,"./uk.js":109,"./ur":110,"./ur.js":110,"./uz":112,"./uz-latn":111,"./uz-latn.js":111,"./uz.js":112,"./vi":113,"./vi.js":113,"./x-pseudo":114,"./x-pseudo.js":114,"./yo":115,"./yo.js":115,"./zh-cn":116,"./zh-cn.js":116,"./zh-hk":117,"./zh-hk.js":117,"./zh-tw":118,"./zh-tw.js":118};r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id=135},139:function(t,e,s){function r(t){s(133)}var o=s(1)(s(127),s(142),r,"data-v-ae6d0416",null);t.exports=o.exports},140:function(t,e,s){function r(t){s(134)}var o=s(1)(s(128),s(143),r,"data-v-e723abce",null);t.exports=o.exports},141:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]}},142:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v("Loading...")]),t._v(" "),s("section",{staticClass:"serverapp"},[s("header",{staticClass:"header"},[s("nav",{staticClass:"navbar navbar-toggleable-sm navbar-light bg-faded"},[s("a",{staticClass:"navbar-brand"},[t._v("Pivotal Board")]),t._v(" "),s("form",{directives:[{name:"show",rawName:"v-show",value:t.projects,expression:"projects"}],staticClass:"form-inline"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.projects,expression:"projects"}],staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v("Show")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.iterationCount,expression:"iterationCount"}],staticClass:"form-control-inline",staticStyle:{"text-align":"center"},attrs:{type:"number",min:"1",max:"9"},domProps:{value:t.iterationCount},on:{input:function(e){e.target.composing||(t.iterationCount=e.target.value)},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("span",{staticClass:"input-group-addon"},[t._v("Iterations")])])]),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.projects,expression:"projects"}],staticClass:"nav nav-pills"},t._l(t.projects,function(e,r){return s("li",{key:e.id,staticClass:"nav-item"},[s("a",{staticClass:"nav-link",class:{active:e==t.selectedProject},attrs:{href:"#"},on:{click:function(s){t.selectProject(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:!t.connected,expression:"!connected"},{name:"model",rawName:"v-model",value:t.config.pivotToken,expression:"config.pivotToken"}],staticClass:"form-control",attrs:{autofocus:"",autocomplete:"off",placeholder:"Pivotal API Token"},domProps:{value:t.config.pivotToken},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.setToken()},input:function(e){e.target.composing||(t.config.pivotToken=e.target.value)}}}),t._v(" "),s("div",{staticClass:"ml-auto justify-content-end"},[s("button",{directives:[{name:"show",rawName:"v-show",value:!t.connected,expression:"!connected"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.setToken()}}},[t._v("\n              Connect\n          ")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.connected,expression:"connected"}],staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.disconnect()}}},[t._v("\n              Disconnect\n          ")])])])]),t._v(" "),s("main",[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.connected,expression:"!connected"}],staticClass:"row"},[t._m(0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.possible_fix,expression:"error.possible_fix"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.error.error))]),t._v(" "+t._s(t.error.possible_fix)+"\n      ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.message,expression:"error.message"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.error.name))]),t._v(" "+t._s(t.error.message)+"\n      ")]),t._v(" "),s("div",[s("h1",[t._v("Stories")]),t._v(" "),s("div",[s("div",{staticClass:"left"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.stories,expression:"stories"}],staticClass:"scrum-board"},[s("div",{staticClass:"scrum-column"},[s("h2",[t._v("Todo")]),t._v(" "),t._l(t.todoStories,function(t,e){return s("story-card",{key:t.id,attrs:{story:t}})})],2),t._v(" "),s("div",{staticClass:"scrum-column"},[s("h2",[t._v("Dev")]),t._v(" "),t._l(t.devStories,function(t,e){return s("story-card",{key:t.id,attrs:{story:t}})})],2),t._v(" "),s("div",{staticClass:"scrum-column"},[s("h2",[t._v("QA")]),t._v(" "),t._l(t.qaStories,function(t,e){return s("story-card",{key:t.id,attrs:{story:t}})})],2),t._v(" "),s("div",{staticClass:"scrum-column"},[s("h2",[t._v("Done")]),t._v(" "),t._l(t.doneStories,function(t,e){return s("story-card",{key:t.id,attrs:{story:t}})})],2)])]),t._v(" "),t._m(1)])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-12"},[s("a",{attrs:{href:"https://www.pivotaltracker.com/profile"}},[t._v("Get your API Token from your PivotalTracker Profile page")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("div",{staticClass:"ct-chart ct-square"})])}]}},143:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("a",{staticClass:"left",attrs:{href:t.story.url}},[t._v(t._s(t.story.id))]),t._v(" "),s("span",{class:t.cardGlyph(t.story)}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.story.estimate,expression:"story.estimate"}],staticClass:"right badge badge-primary"},[t._v(t._s(t.story.estimate))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.story.estimate,expression:"!story.estimate"}],staticClass:"right badge badge-primary"},[t._v("-")])]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(t.story.name))]),t._v(" "),s("div")])])},staticRenderFns:[]}}},[125]);
//# sourceMappingURL=app.b1404486d2d3c7b04ed8.js.map