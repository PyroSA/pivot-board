webpackJsonp([1],{121:function(t,e,s){"use strict";var a=s(1),r=s(140),i=s(137),o=s.n(i);a.a.use(r.a),e.a=new r.a({routes:[{path:"/",name:"Hello",component:o.a}]})},122:function(t,e,s){function a(t){s(131)}var r=s(118)(s(126),s(138),a,null,null);t.exports=r.exports},123:function(t,e,s){"use strict";function a(t){this._configKey=t}var r=s(128),i=s.n(r);a.prototype.load=function(){return JSON.parse(localStorage.getItem(this._configKey)||'{ "pivotToken": "" }')},a.prototype.save=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem(this._configKey,i()(t))},e.a=a},124:function(t,e,s){"use strict";var a=s(136),r=s.n(a),i=s(2),o=s.n(i),n=void 0;n=function(t){this.apiToken=t,this.baseUrl="https://www.pivotaltracker.com/services/v5/"},n.prototype.updateStory=function(t,e,s,a){this.api("put","projects/"+t+"/stories/"+e,{json:s},a)},n.prototype.getStory=function(t,e){this.api("get","/stories/"+t,{},e)},n.prototype.getProjects=function(t){this.api("get","/projects",{},t)},n.prototype.getStories=function(t,e,s,a,r,i){this.paginated("projects/"+t+"/stories",r||0,i||128,e,s,a)},n.prototype.getActivity=function(t,e,s,a,r,i){this.paginated("projects/"+t+"/activity",r||0,i||128,e,s,a)},n.prototype.getStoryActivity=function(t,e,s,a){this.api("get","projects/"+t+"/stories/"+e+"/activity",{qs:a||{}},s)},n.prototype.getMyActivity=function(t,e){this.api("get","my/activity",{qs:e||{}},t)},n.prototype.getTasks=function(t,e,s){this.api("get","projects/"+t+"/stories/"+e+"/tasks",{},s)},n.prototype.addTask=function(t,e,s,a,r){this.api("post","projects/"+t+"/stories/"+e+"/tasks",{body:{description:s,position:a}},r)},n.prototype.getIterations=function(t,e,s,a,r,i){this.paginated("projects/"+t+"/iterations",r||0,i||128,e,s,a)},n.prototype.getCurrentIterations=function(t,e){this.api("get","projects/"+t+"/iterations",{qs:{scope:"current",date_format:"millis"}},function(t,s){o.a.isFunction(e)&&(t||!s?e(t):e(!1,s))})},n.prototype.getMemberships=function(t,e){this.api("get","projects/"+t+"/memberships",{},e)},n.prototype.getComments=function(t,e,s){this.api("get","projects/"+t+"/stories/"+e+"/comments",{},s)},n.prototype.exportStories=function(t,e){this.api("post","stories/export",{body:r.a.stringify({"ids[]":t})},e)},n.prototype.getLabels=function(t,e){this.api("get","projects/"+t+"/labels",{},e)},n.prototype.getStoryLabels=function(t,e,s){this.api("get","projects/"+t+"/stories/"+e+"/labels",{},s)},n.prototype.addStoryLabel=function(t,e,s,a){this.api("post","projects/"+t+"/stories/"+e+"/labels",{body:{name:s}},a)},n.prototype.createLabel=function(t,e,s){this.api("post","projects/"+t+"/labels",{body:{name:e}},s)},n.prototype.createStory=function(t,e,s){this.api("post","projects/"+t+"/stories",{body:e},s)},n.prototype.paginated=function(t,e,s,a,r,i){var n=this,c={qs:o.a.extend({offset:e,limit:s,envelope:!0},a)};this.api("get",t,c,function(o,c){o||!c.pagination?i&&i(o||c):(e+=c.pagination.returned,r&&r(c.data,c.pagination,function(o){if(o)i&&i(o);else{var l=c.pagination.total-e;l>0?n.paginated(t,e,Math.min(l,s),a,r,i):i&&i()}}))})},n.prototype.api=function(t,e,s,a){var i=new window.XMLHttpRequest;console.log("API",t,e,s),s.qs?i.open(t,""+this.baseUrl+e+"?"+r.a.stringify(s.qs)):i.open(t,""+this.baseUrl+e),i.responseType="json",i.setRequestHeader("X-TrackerToken",this.apiToken),i.onload=function(){o.a.isFunction(a)&&a(void 0,i.response)},i.onerror=function(t){console.error("Houston, we've got a problem.",t,i),o.a.isFunction(a)&&a(t)},i.send()},e.a=n},125:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(1),r=s(122),i=s.n(r),o=s(121);a.a.config.productionTip=!1,new a.a({el:"#app",router:o.a,template:"<App/>",components:{App:i.a}})},126:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},127:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(124),r=s(123),i=s(0),o=s.n(i),n=s(2),c=s.n(n),l=new r.a("pivot-board"),d=new window.Chartist.Line(".ct-chart",{labels:["new"],series:[[0,30,60,90,0,100]]},{axisY:{onlyInteger:!0}}),u=function(t){var e={labels:[],created:[],updated:[],accepted:[],todo:[],burn:[]},s=void 0;for(s=t.start;s<=t.finish;s+=864e5)e.labels.push(o()(s).format("D MMM")),e.created.push(t.stories.reduce(function(t,e){return e.created_at<=s?t+(e.estimate||0):t},0)),e.updated.push(t.stories.reduce(function(t,e){return e.updated_at<=s?t+(e.estimate||0):t},0)),e.accepted.push(t.stories.reduce(function(t,e){return e.accepted_at<=s?t+(e.estimate||0):t},0)),e.todo.push(e.created[e.created.length-1]-e.accepted[e.accepted.length-1]);var a=-1;for(s=t.finish;s>=t.start;s-=864e5){var r=o()(s).weekday();r>0&&r<6&&a++,e.burn.unshift(a<0?0:a)}var i=1/e.burn[0];for(s=0;s<e.burn.length;s++)console.log(s,e.burn[s]),e.burn[s]=e.created[s]*e.burn[s]*i;var n={labels:e.labels,series:[e.created,e.burn,e.todo]};d.update(n)};e.default={name:"hello",data:function(){return{config:l.load(),connected:!1,pivotal:void 0,error:"",projects:void 0,stories:void 0,selectedProject:void 0}},computed:{monitoring:function(){return this.config.connect},todoStories:function(){return(this.stories||[]).filter(function(t){return["planned","rejected"].includes(t.current_state)})},devStories:function(){return(this.stories||[]).filter(function(t){return["started","finished"].includes(t.current_state)})},qaStories:function(){return(this.stories||[]).filter(function(t){return["delivered"].includes(t.current_state)})},doneStories:function(){return(this.stories||[]).filter(function(t){return["accepted"].includes(t.current_state)})}},methods:{setToken:function(){l.save(this.config),this.connect()},cardStyle:function(t){switch(t.current_state){case"planned":return"card-outline-primary";case"rejected":return"card-outline-danger";case"started":return"card-outline-primary";case"finished":return"card-outline-warning";case"delivered":return"card-outline-primary";case"accepted":return"card-outline-success";default:return"card-outline-secondary"}},cardGlyph:function(t){switch(t.story_type){case"bug":return"fa fa-bug";case"chore":return"fa fa-cog";case"feature":return"fa fa-star";case"release":return"fa fa-flag-checkered";default:return"fa fa-question"}},disconnect:function(){this.connected=!1,this.projects=void 0,this.stories=void 0,this.selectProject(void 0)},selectIteration:function(t){if(console.log("Iteration",t),t){this.stories=t.stories,u(t);var e={};this.stories.forEach(function(t){e[t.current_state]=(e[t.current_state]||0)+1}),console.log(e)}else this.stories=void 0},selectProject:function(t){var e=this;console.log("Project",t),this.selectedProject=t,this.selectIteration(void 0),t&&this.pivotal.getIterations(t.id,{scope:"done_current",date_format:"millis",offset:0},function(t){if(console.log("comp",t),c.a.isError(t))return void console.error("selectedProject",t);var s={start:t[0].start,finish:t[0].finish,stories:[]};t.forEach(function(t){console.log(s),console.log(t),s.start=Math.min(s.start,t.start),s.finish=Math.max(s.finish,t.finish),s.stories=s.stories.concat(t.stories)}),e.selectIteration(s)})},connect:function(){var t=this;if(!this.config.pivotToken)return void this.disconnect();this.error={},this.connected=!0,this.pivotal=new a.a(this.config.pivotToken),this.pivotal.getProjects(function(e,s){if(e||s.error)return t.error=e||s,console.error(t.error),void t.disconnect();s&&s.length>0&&(console.log(s),t.projects=s,t.selectProject(s[0]))})}},mounted:function(){this.connect()}}},131:function(t,e){},132:function(t,e){},133:function(t,e,s){function a(t){return s(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./af":3,"./af.js":3,"./ar":10,"./ar-dz":4,"./ar-dz.js":4,"./ar-kw":5,"./ar-kw.js":5,"./ar-ly":6,"./ar-ly.js":6,"./ar-ma":7,"./ar-ma.js":7,"./ar-sa":8,"./ar-sa.js":8,"./ar-tn":9,"./ar-tn.js":9,"./ar.js":10,"./az":11,"./az.js":11,"./be":12,"./be.js":12,"./bg":13,"./bg.js":13,"./bn":14,"./bn.js":14,"./bo":15,"./bo.js":15,"./br":16,"./br.js":16,"./bs":17,"./bs.js":17,"./ca":18,"./ca.js":18,"./cs":19,"./cs.js":19,"./cv":20,"./cv.js":20,"./cy":21,"./cy.js":21,"./da":22,"./da.js":22,"./de":25,"./de-at":23,"./de-at.js":23,"./de-ch":24,"./de-ch.js":24,"./de.js":25,"./dv":26,"./dv.js":26,"./el":27,"./el.js":27,"./en-au":28,"./en-au.js":28,"./en-ca":29,"./en-ca.js":29,"./en-gb":30,"./en-gb.js":30,"./en-ie":31,"./en-ie.js":31,"./en-nz":32,"./en-nz.js":32,"./eo":33,"./eo.js":33,"./es":35,"./es-do":34,"./es-do.js":34,"./es.js":35,"./et":36,"./et.js":36,"./eu":37,"./eu.js":37,"./fa":38,"./fa.js":38,"./fi":39,"./fi.js":39,"./fo":40,"./fo.js":40,"./fr":43,"./fr-ca":41,"./fr-ca.js":41,"./fr-ch":42,"./fr-ch.js":42,"./fr.js":43,"./fy":44,"./fy.js":44,"./gd":45,"./gd.js":45,"./gl":46,"./gl.js":46,"./gom-latn":47,"./gom-latn.js":47,"./he":48,"./he.js":48,"./hi":49,"./hi.js":49,"./hr":50,"./hr.js":50,"./hu":51,"./hu.js":51,"./hy-am":52,"./hy-am.js":52,"./id":53,"./id.js":53,"./is":54,"./is.js":54,"./it":55,"./it.js":55,"./ja":56,"./ja.js":56,"./jv":57,"./jv.js":57,"./ka":58,"./ka.js":58,"./kk":59,"./kk.js":59,"./km":60,"./km.js":60,"./kn":61,"./kn.js":61,"./ko":62,"./ko.js":62,"./ky":63,"./ky.js":63,"./lb":64,"./lb.js":64,"./lo":65,"./lo.js":65,"./lt":66,"./lt.js":66,"./lv":67,"./lv.js":67,"./me":68,"./me.js":68,"./mi":69,"./mi.js":69,"./mk":70,"./mk.js":70,"./ml":71,"./ml.js":71,"./mr":72,"./mr.js":72,"./ms":74,"./ms-my":73,"./ms-my.js":73,"./ms.js":74,"./my":75,"./my.js":75,"./nb":76,"./nb.js":76,"./ne":77,"./ne.js":77,"./nl":79,"./nl-be":78,"./nl-be.js":78,"./nl.js":79,"./nn":80,"./nn.js":80,"./pa-in":81,"./pa-in.js":81,"./pl":82,"./pl.js":82,"./pt":84,"./pt-br":83,"./pt-br.js":83,"./pt.js":84,"./ro":85,"./ro.js":85,"./ru":86,"./ru.js":86,"./sd":87,"./sd.js":87,"./se":88,"./se.js":88,"./si":89,"./si.js":89,"./sk":90,"./sk.js":90,"./sl":91,"./sl.js":91,"./sq":92,"./sq.js":92,"./sr":94,"./sr-cyrl":93,"./sr-cyrl.js":93,"./sr.js":94,"./ss":95,"./ss.js":95,"./sv":96,"./sv.js":96,"./sw":97,"./sw.js":97,"./ta":98,"./ta.js":98,"./te":99,"./te.js":99,"./tet":100,"./tet.js":100,"./th":101,"./th.js":101,"./tl-ph":102,"./tl-ph.js":102,"./tlh":103,"./tlh.js":103,"./tr":104,"./tr.js":104,"./tzl":105,"./tzl.js":105,"./tzm":107,"./tzm-latn":106,"./tzm-latn.js":106,"./tzm.js":107,"./uk":108,"./uk.js":108,"./ur":109,"./ur.js":109,"./uz":111,"./uz-latn":110,"./uz-latn.js":110,"./uz.js":111,"./vi":112,"./vi.js":112,"./x-pseudo":113,"./x-pseudo.js":113,"./yo":114,"./yo.js":114,"./zh-cn":115,"./zh-cn.js":115,"./zh-hk":116,"./zh-hk.js":116,"./zh-tw":117,"./zh-tw.js":117};a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id=133},137:function(t,e,s){function a(t){s(132)}var r=s(118)(s(127),s(139),a,"data-v-6d5de674",null);t.exports=r.exports},138:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]}},139:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v("Loading...")]),t._v(" "),s("section",{staticClass:"serverapp"},[s("header",{staticClass:"header"},[s("nav",{staticClass:"navbar navbar-toggleable-sm navbar-light bg-faded"},[s("h1",{staticClass:"navbar-brand"},[t._v("Pivotal Board")]),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.projects,expression:"projects"}],staticClass:"nav nav-pills"},t._l(t.projects,function(e,a){return s("li",{key:e.id,staticClass:"nav-item"},[s("a",{staticClass:"nav-link",class:{active:e==t.selectedProject},attrs:{href:"#"},on:{click:function(s){t.selectProject(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:!t.connected,expression:"!connected"},{name:"model",rawName:"v-model",value:t.config.pivotToken,expression:"config.pivotToken"}],staticClass:"form-control",attrs:{autofocus:"",autocomplete:"off",placeholder:"Pivotal API Token"},domProps:{value:t.config.pivotToken},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.setToken()},input:function(e){e.target.composing||(t.config.pivotToken=e.target.value)}}}),t._v(" "),s("div",{staticClass:"ml-auto justify-content-end"},[s("button",{directives:[{name:"show",rawName:"v-show",value:!t.connected,expression:"!connected"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.setToken()}}},[t._v("\n              Connect\n          ")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.connected,expression:"connected"}],staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.disconnect()}}},[t._v("\n              Disconnect\n          ")])])])]),t._v(" "),s("main",[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.connected,expression:"!connected"}],staticClass:"row"},[t._m(0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.possible_fix,expression:"error.possible_fix"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.error.error))]),t._v(" "+t._s(t.error.possible_fix)+"\n      ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.message,expression:"error.message"}],staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.error.name))]),t._v(" "+t._s(t.error.message)+"\n      ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.stories,expression:"stories"}]},[s("h1",[t._v("Stories")]),t._v(" "),s("div",{staticClass:"scrum-board"},[s("div",{staticClass:"scrum-column"},[s("h2",[t._v("Todo")]),t._v(" "),t._l(t.todoStories,function(e,a){return s("div",{key:e.id,staticClass:"card",class:t.cardStyle(e)},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("a",{staticClass:"left",attrs:{href:e.url}},[t._v(t._s(e.id))]),t._v(" "),s("span",{class:t.cardGlyph(e)}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.estimate,expression:"story.estimate"}],staticClass:"right badge badge-primary"},[t._v(t._s(e.estimate))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.estimate,expression:"!story.estimate"}],staticClass:"right badge badge-primary"},[t._v("-")])]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(e.name))]),t._v(" "),s("div")])])})],2),t._v(" "),s("div",{staticClass:"scrum-column"},[s("h2",[t._v("Dev")]),t._v(" "),t._l(t.devStories,function(e,a){return s("div",{key:e.id,staticClass:"card",class:t.cardStyle(e)},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("a",{staticClass:"left",attrs:{href:e.url}},[t._v(t._s(e.id))]),t._v(" "),s("span",{class:t.cardGlyph(e)}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.estimate,expression:"story.estimate"}],staticClass:"right badge badge-primary"},[t._v(t._s(e.estimate))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.estimate,expression:"!story.estimate"}],staticClass:"right badge badge-primary"},[t._v("-")])]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(e.name))]),t._v(" "),s("div")])])})],2),t._v(" "),s("div",{staticClass:"scrum-column"},[s("h2",[t._v("QA")]),t._v(" "),t._l(t.qaStories,function(e,a){return s("div",{key:e.id,staticClass:"card",class:t.cardStyle(e)},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("a",{staticClass:"left",attrs:{href:e.url}},[t._v(t._s(e.id))]),t._v(" "),s("span",{class:t.cardGlyph(e)}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.estimate,expression:"story.estimate"}],staticClass:"right badge badge-primary"},[t._v(t._s(e.estimate))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.estimate,expression:"!story.estimate"}],staticClass:"right badge badge-primary"},[t._v("-")])]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(e.name))]),t._v(" "),s("div")])])})],2),t._v(" "),s("div",{staticClass:"scrum-column"},[s("h2",[t._v("Done")]),t._v(" "),t._l(t.doneStories,function(e,a){return s("div",{key:e.id,staticClass:"card",class:t.cardStyle(e)},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("a",{staticClass:"left",attrs:{href:e.url}},[t._v(t._s(e.id))]),t._v(" "),s("span",{class:t.cardGlyph(e)}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.estimate,expression:"story.estimate"}],staticClass:"right badge badge-primary"},[t._v(t._s(e.estimate))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.estimate,expression:"!story.estimate"}],staticClass:"right badge badge-primary"},[t._v("-")])]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(e.name))]),t._v(" "),s("div")])])})],2)])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-12"},[s("a",{attrs:{href:"https://www.pivotaltracker.com/profile"}},[t._v("Get your API Token from your PivotalTracker Profile page")])])}]}}},[125]);
//# sourceMappingURL=app.f68d28fa1a88d31accf5.js.map